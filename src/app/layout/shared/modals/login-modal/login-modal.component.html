<!-- login-modal.component.html -->
<div class="modal-header align-items-center">
  <h4 class="modal-title gradient-text" *ngIf="!showForgotPassword">Welcome back! Glad to see you, Again!</h4>
  <h4 class="modal-title d-flex align-items-center gap-3" *ngIf="showForgotPassword">
    <button type="button" class="back-button" (click)="toggleForgotPassword()">
      <i class="bi bi-arrow-left"></i>
      Back
    </button>
    Forgot Password?
  </h4>
  <button type="button" class="btn-close" aria-label="Close" (click)="close()"></button>
</div>

<div class="modal-body">
  <ng-container *ngIf="!showForgotPassword">
    <form (ngSubmit)="onLogin()" class="mb-4">
      <div class="mb-3">
        <input
          type="email"
          class="form-control"
          placeholder="Enter your email"
          [(ngModel)]="loginData.email"
          name="email"
          required
          autocomplete="email">
      </div>
      <div class="mb-3">
        <input
          type="password"
          class="form-control"
          placeholder="Enter your password"
          [(ngModel)]="loginData.password"
          name="password"
          required
          autocomplete="current-password">
      </div>
      <div class="mb-4 text-end">
        <button type="button" class="btn-link" (click)="toggleForgotPassword()">
          Forgot Password?
        </button>
      </div>
      <button type="submit" class="btn btn-primary w-100">
        <i class="bi bi-box-arrow-in-right me-2"></i>
        Login
      </button>
    </form>

    <div class="social-login">
      <span>Or Login with</span>
    </div>

    <div class="text-center mb-4">
      <div id="googleSignInButton" class="d-flex justify-content-center"></div>
      <button *ngIf="!isGoogleButtonRendered"
              (click)="renderGoogleButton()"
              class="btn btn-google mx-auto">
        <i class="bi bi-google me-2"></i>
        Continue with Google
      </button>
    </div>

    <div class="text-center">
      <p class="mb-0 text-white">
        Don't have an account?
        <a href="#" class="register-link" (click)="$event.preventDefault(); openRegisterModal()">
          Register Now
        </a>
      </p>
    </div>

    <div *ngIf="errorMessage" class="alert mt-3">
      {{ errorMessage }}
    </div>
  </ng-container>

  <ng-container *ngIf="showForgotPassword">
    <p class="text-muted mb-4">
      Don't worry! It happens. Please enter the email address linked with your account.
    </p>
    <form (ngSubmit)="onForgotPassword()">
      <div class="mb-4">
        <input
          type="email"
          class="form-control"
          placeholder="Enter your email"
          [(ngModel)]="forgotPasswordEmail"
          name="email"
          required
          autocomplete="email">
      </div>
      <button type="submit" class="btn btn-primary w-100">
        <i class="bi bi-envelope me-2"></i>
        Send Reset Link
      </button>
    </form>

    <div *ngIf="forgotPasswordMessage" class="alert alert-info mt-3">
      {{ forgotPasswordMessage }}
    </div>
    <div *ngIf="errorMessage" class="alert mt-3">
      {{ errorMessage }}
    </div>
  </ng-container>
</div>
